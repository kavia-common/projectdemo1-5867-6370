{"is_source_file": true, "format": "Python", "description": "This file contains validation logic for device data within a backend application. It defines a JSON schema for a device, including validation functions for device payloads, a utility to convert strings to MongoDB ObjectId objects, and a serializer to prepare database documents for JSON responses.", "external_files": ["bson", "jsonschema"], "external_methods": ["jsonschema.Draft7Validator", "jsonschema.FormatChecker", "bson.ObjectId"], "published": ["validate_device_payload", "to_object_id", "serialize_device"], "classes": [], "methods": [{"name": "Tuple[bool,Dict[str,str]] validate_device_payload(payload: Dict[str, Any], partial: bool = False)", "description": "Validates a device payload against the defined JSON schema, supporting partial updates.", "scope": "", "scopeKind": ""}, {"name": "ObjectId to_object_id(id_str: str)", "description": "Converts a string to a MongoDB ObjectId, raising an error if the format is invalid.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] serialize_device(doc: Dict[str, Any])", "description": "Serializes a MongoDB document for JSON transport, converting _id to string and formatting datetime fields.", "scope": "", "scopeKind": ""}, {"name": "bool is_ipv4_format(value: str)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["jsonschema.Draft7Validator", "jsonschema.FormatChecker", "re.compile", "is_ipv4_format", "ObjectId", "serialize_device"], "search-terms": ["Device schema validation", "MongoDB ObjectId conversion", "device payload validation", "JSON schema for devices", "IPv4 address validation"], "state": 2, "file_id": 9, "knowledge_revision": 33, "git_revision": "d0d9931cf62b78316abcc66a541f682998a1ab1a", "revision_history": [{"19": ""}, {"33": "d0d9931cf62b78316abcc66a541f682998a1ab1a"}], "ctags": [{"_type": "tag", "name": "DEVICE_SCHEMA", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^DEVICE_SCHEMA: Dict[str, Any] = {$/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable"}, {"_type": "tag", "name": "_format_checker", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^_format_checker = FormatChecker()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ipv4_regex", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^_ipv4_regex = re.compile($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_validator", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^_validator = Draft7Validator(DEVICE_SCHEMA, format_checker=_format_checker)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "is_ipv4_format", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^def is_ipv4_format(value: str) -> bool:  # type: ignore[override]$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(value: str)"}, {"_type": "tag", "name": "serialize_device", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^def serialize_device(doc: Dict[str, Any]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(doc: Dict[str, Any])"}, {"_type": "tag", "name": "to_object_id", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^def to_object_id(id_str: str) -> ObjectId:$/", "language": "Python", "typeref": "typename:ObjectId", "kind": "function", "signature": "(id_str: str)"}, {"_type": "tag", "name": "validate_device_payload", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/validation.py", "pattern": "/^def validate_device_payload(payload: Dict[str, Any], partial: bool = False) -> Tuple[bool, Dict[/", "language": "Python", "typeref": "typename:Tuple[bool,Dict[str,str]]", "kind": "function", "signature": "(payload: Dict[str, Any], partial: bool = False)"}], "hash": "ad3b3d6f88763bbb1fc1a64136a8eb05", "format-version": 4, "code-base-name": "Backend", "filename": "Backend/app/validation.py", "fields": [{"name": "Dict[str, Any] DEVICE_SCHEMA", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_format_checker = FormatChecker()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_ipv4_regex = re.compile(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_validator = Draft7Validator(DEVICE_SCHEMA, format_checker=_format_checker)", "scope": "", "scopeKind": "", "description": "unavailable"}]}