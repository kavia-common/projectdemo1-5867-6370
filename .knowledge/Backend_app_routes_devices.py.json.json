{"is_source_file": true, "format": "Python", "description": "This file implements REST API endpoints for managing devices, including listing, creating, retrieving, updating, deleting, and pinging devices. It uses Flask with Flask-Smorest, interacts with a MongoDB database, and includes validation and serialization of device data.", "external_files": ["../db", "../validation", "../ping_util"], "external_methods": ["validate_device_payload", "serialize_device", "to_object_id", "ping_host"], "published": ["DevicesList", "DeviceDetail", "DevicePing"], "classes": [{"name": "DevicesList", "description": "Handles listing all devices and creating a new device via GET and POST requests."}, {"name": "DeviceDetail", "description": "Handles retrieval, update, and deletion of a specific device identified by its ID."}, {"name": "DevicePing", "description": "Handles pinging a device and updating its online status and last checked timestamp."}], "methods": [{"name": "get(self)", "description": "Lists all devices with optional filtering by status and name.", "scope": "DevicesList", "scopeKind": "class"}, {"name": "post(self)", "description": "Creates a new device from JSON payload after validation.", "scope": "DevicesList", "scopeKind": "class"}, {"name": "get(self, item_id: str)", "description": "Retrieves a single device by ID.", "scope": "DeviceDetail", "scopeKind": "class"}, {"name": "put(self, item_id: str)", "description": "Updates a device by ID with validated JSON payload.", "scope": "DeviceDetail", "scopeKind": "class"}, {"name": "delete(self, item_id: str)", "description": "Deletes a device by ID.", "scope": "DeviceDetail", "scopeKind": "class"}, {"name": "post(self, item_id: str)", "description": "Pings a device by ID, updates its status based on ping result, and updates last_checked timestamp.", "scope": "DevicePing", "scopeKind": "class"}, {"name": "Database _get_db()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["validate_device_payload", "serialize_device", "to_object_id", "ping_host", "coll.find", "coll.insert_one", "coll.find_one", "coll.update_one", "coll.delete_one"], "search-terms": ["Device CRUD endpoints", "Flask MethodView class", "MongoDB device collection", "Device ping endpoint", "Device status update", "validate_device_payload", "serialize_device", "ping_host", "Device ID rather than general"], "state": 2, "file_id": 11, "knowledge_revision": 32, "git_revision": "d0d9931cf62b78316abcc66a541f682998a1ab1a", "revision_history": [{"23": ""}, {"32": "d0d9931cf62b78316abcc66a541f682998a1ab1a"}], "ctags": [{"_type": "tag", "name": "DeviceDetail", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^class DeviceDetail(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DevicePing", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^class DevicePing(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DevicesList", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^class DevicesList(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_get_db", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^def _get_db() -> Database:$/", "language": "Python", "typeref": "typename:Database", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^    def delete(self, item_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, item_id: str)", "scope": "DeviceDetail", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DevicesList", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^    def get(self, item_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, item_id: str)", "scope": "DeviceDetail", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^    def post(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DevicesList", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^    def post(self, item_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, item_id: str)", "scope": "DevicePing", "scopeKind": "class"}, {"_type": "tag", "name": "put", "path": "/home/kavia/workspace/code-generation/projectdemo1-5867-6370/Backend/app/routes/devices.py", "pattern": "/^    def put(self, item_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, item_id: str)", "scope": "DeviceDetail", "scopeKind": "class"}], "hash": "6acf27d2908a72103831d9a5f499cf56", "format-version": 4, "code-base-name": "Backend", "filename": "Backend/app/routes/devices.py", "fields": [{"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}]}